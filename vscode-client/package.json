{
  "name": "qualimetry-vscode-gherkin-plugin",
  "displayName": "Qualimetry Gherkin Analyzer",
  "description": "Real-time static analysis for Cucumber Gherkin .feature files - structure, design, style, and correctness rules powered by the Qualimetry analysis engine.",
  "version": "1.3.0",
  "publisher": "qualimetry",
  "license": "Apache-2.0",
  "icon": "icon.png",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Linters",
    "Programming Languages"
  ],
  "activationEvents": [
    "onLanguage:gherkin",
    "onCommand:gherkin.importRulesFromSonarQube"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "gherkin.importRulesFromSonarQube",
        "title": "Gherkin: Import rules from SonarQube"
      }
    ],
    "languages": [
      {
        "id": "gherkin",
        "aliases": [
          "Gherkin",
          "Cucumber"
        ],
        "extensions": [
          ".feature"
        ],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "gherkin",
        "scopeName": "source.gherkin",
        "path": "./syntaxes/gherkin.tmLanguage.json"
      }
    ],
    "configuration": {
      "title": "Gherkin Analyzer",
      "properties": {
        "gherkinAnalyzer.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable or disable the Gherkin Analyzer."
        },
        "gherkinAnalyzer.java.home": {
          "type": "string",
          "default": "",
          "description": "Path to a Java 17+ installation. If empty, uses JAVA_HOME or PATH."
        },
        "gherkinAnalyzer.rulesReplaceDefaults": {
          "type": "boolean",
          "default": false,
          "description": "When true, only the rules listed in gherkinAnalyzer.rules run (e.g. after Import from SonarQube). When false, listed rules are overrides and unlisted rules use the extension default profile."
        },
        "gherkinAnalyzer.rules": {
          "type": "object",
          "default": {
            "feature-file-required": {
              "enabled": true,
              "severity": "major"
            },
            "feature-name-required": {
              "enabled": true,
              "severity": "critical"
            },
            "feature-description-recommended": {
              "enabled": false,
              "severity": "info"
            },
            "scenario-required": {
              "enabled": true,
              "severity": "major"
            },
            "scenario-name-required": {
              "enabled": true,
              "severity": "critical"
            },
            "step-required": {
              "enabled": true,
              "severity": "major"
            },
            "examples-minimum-rows": {
              "enabled": true,
              "severity": "critical"
            },
            "examples-column-coverage": {
              "enabled": true,
              "severity": "critical"
            },
            "scenario-count-limit": {
              "enabled": true,
              "severity": "major",
              "maxScenarios": "12"
            },
            "step-count-limit": {
              "enabled": true,
              "severity": "major",
              "maxSteps": "12"
            },
            "background-given-only": {
              "enabled": true,
              "severity": "critical"
            },
            "shared-given-to-background": {
              "enabled": true,
              "severity": "major"
            },
            "step-order-given-when-then": {
              "enabled": true,
              "severity": "critical"
            },
            "single-when-per-scenario": {
              "enabled": true,
              "severity": "major"
            },
            "when-then-required": {
              "enabled": true,
              "severity": "critical"
            },
            "unique-feature-name": {
              "enabled": true,
              "severity": "major"
            },
            "unique-scenario-name": {
              "enabled": true,
              "severity": "major"
            },
            "no-duplicate-steps": {
              "enabled": true,
              "severity": "critical"
            },
            "use-scenario-outline-for-examples": {
              "enabled": true,
              "severity": "major"
            },
            "business-language-only": {
              "enabled": true,
              "severity": "major"
            },
            "consistent-feature-language": {
              "enabled": false,
              "severity": "major"
            },
            "consistent-indentation": {
              "enabled": true,
              "severity": "minor",
              "indentation": "2"
            },
            "no-tab-characters": {
              "enabled": true,
              "severity": "minor"
            },
            "no-trailing-whitespace": {
              "enabled": true,
              "severity": "minor"
            },
            "newline-at-end-of-file": {
              "enabled": true,
              "severity": "minor"
            },
            "no-byte-order-mark": {
              "enabled": true,
              "severity": "major"
            },
            "consistent-line-endings": {
              "enabled": false,
              "severity": "minor",
              "lineEnding": "LF"
            },
            "file-name-convention": {
              "enabled": true,
              "severity": "minor",
              "pattern": "^[a-z][-A-Za-z0-9]*\\.feature$"
            },
            "comment-format": {
              "enabled": true,
              "severity": "minor"
            },
            "prefer-and-but-keywords": {
              "enabled": true,
              "severity": "minor"
            },
            "no-star-step-prefix": {
              "enabled": false,
              "severity": "minor"
            },
            "examples-separator-line": {
              "enabled": true,
              "severity": "minor"
            },
            "step-sentence-max-length": {
              "enabled": true,
              "severity": "major",
              "maxLength": "100"
            },
            "tag-name-pattern": {
              "enabled": true,
              "severity": "minor",
              "pattern": "^[a-z][-a-z0-9]*$"
            },
            "tag-permitted-values": {
              "enabled": false,
              "severity": "minor",
              "pattern": ".*"
            },
            "tag-placement": {
              "enabled": true,
              "severity": "minor"
            },
            "no-redundant-tags": {
              "enabled": true,
              "severity": "minor"
            },
            "no-examples-tags": {
              "enabled": false,
              "severity": "minor"
            },
            "no-unused-variables": {
              "enabled": true,
              "severity": "major"
            },
            "given-step-pattern": {
              "enabled": false,
              "severity": "minor",
              "pattern": ".*"
            },
            "when-step-pattern": {
              "enabled": false,
              "severity": "minor",
              "pattern": ".*"
            },
            "then-step-pattern": {
              "enabled": false,
              "severity": "minor",
              "pattern": ".*"
            },
            "no-unknown-step-type": {
              "enabled": true,
              "severity": "major"
            },
            "todo-comment": {
              "enabled": true,
              "severity": "info"
            },
            "fixme-comment": {
              "enabled": true,
              "severity": "info"
            },
            "comment-pattern-match": {
              "enabled": false,
              "severity": "major"
            },
            "parse-error": {
              "enabled": true,
              "severity": "critical"
            },
            "rule-name-required": {
              "enabled": true,
              "severity": "critical"
            },
            "rule-scenario-required": {
              "enabled": true,
              "severity": "major"
            },
            "unique-rule-name": {
              "enabled": true,
              "severity": "major"
            },
            "rule-description-recommended": {
              "enabled": false,
              "severity": "info"
            },
            "outline-placeholder-required": {
              "enabled": false,
              "severity": "major"
            },
            "scenario-outline-requires-examples": {
              "enabled": true,
              "severity": "major"
            },
            "background-needs-multiple-scenarios": {
              "enabled": false,
              "severity": "minor"
            },
            "blank-line-before-scenario": {
              "enabled": true,
              "severity": "minor"
            },
            "rule-scenario-count-limit": {
              "enabled": true,
              "severity": "major",
              "maxScenarios": "10"
            },
            "feature-rule-count-limit": {
              "enabled": true,
              "severity": "major",
              "maxRules": "8"
            },
            "no-redundant-rule-tags": {
              "enabled": true,
              "severity": "minor"
            },
            "rule-tag-placement": {
              "enabled": true,
              "severity": "minor"
            },
            "examples-name-when-multiple": {
              "enabled": false,
              "severity": "minor"
            },
            "consistent-scenario-keyword": {
              "enabled": false,
              "severity": "minor"
            },
            "no-duplicate-tags": {
              "enabled": true,
              "severity": "minor"
            },
            "no-multiple-empty-lines": {
              "enabled": true,
              "severity": "minor"
            },
            "required-tags": {
              "enabled": false,
              "severity": "major",
              "pattern": ".*"
            },
            "no-restricted-tags": {
              "enabled": false,
              "severity": "major",
              "restrictedTags": "wip,debug,ignore,manual"
            },
            "name-max-length": {
              "enabled": false,
              "severity": "minor",
              "maxLength": "120"
            },
            "one-space-between-tags": {
              "enabled": true,
              "severity": "minor"
            },
            "no-partially-commented-tag-lines": {
              "enabled": true,
              "severity": "minor"
            },
            "outline-single-example-row": {
              "enabled": false,
              "severity": "minor",
              "maxDataRows": "1"
            },
            "no-restricted-patterns": {
              "enabled": false,
              "severity": "major"
            },
            "max-tags-per-element": {
              "enabled": false,
              "severity": "minor",
              "maxTags": "8"
            },
            "feature-file-max-lines": {
              "enabled": false,
              "severity": "minor",
              "maxLines": "300"
            },
            "data-table-max-columns": {
              "enabled": false,
              "severity": "minor",
              "maxColumns": "10"
            },
            "unique-examples-headers": {
              "enabled": true,
              "severity": "critical"
            },
            "no-empty-examples-cells": {
              "enabled": false,
              "severity": "major"
            },
            "no-duplicate-scenario-bodies": {
              "enabled": false,
              "severity": "major"
            },
            "no-conflicting-tags": {
              "enabled": false,
              "severity": "major"
            },
            "no-commented-out-steps": {
              "enabled": false,
              "severity": "minor"
            },
            "background-step-count-limit": {
              "enabled": true,
              "severity": "major",
              "maxSteps": "5"
            },
            "feature-name-matches-filename": {
              "enabled": false,
              "severity": "minor"
            },
            "scenario-description-recommended": {
              "enabled": false,
              "severity": "info"
            },
            "no-empty-doc-strings": {
              "enabled": true,
              "severity": "minor"
            }
          },
          "description": "Per-rule overrides only. Omit this key or use {} to use the extension default for all rules. Add only the rule IDs you want to change (enabled, severity, or rule-specific properties). Unlisted rules use the built-in default."
        }
      }
    }
  },
  "scripts": {
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "bundle": "esbuild src/extension.ts --bundle --outfile=dist/extension.js --external:vscode --format=cjs --platform=node --sourcemap --minify",
    "vscode:prepublish": "npm run bundle"
  },
  "dependencies": {
    "vscode-languageclient": "^9.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/vscode": "^1.85.0",
    "@vscode/test-electron": "^2.3.0",
    "@vscode/vsce": "^3.0.0",
    "esbuild": "^0.27.3",
    "typescript": "^5.3.0"
  }
}
